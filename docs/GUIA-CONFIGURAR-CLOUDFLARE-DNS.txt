========================================
  GUIA: CONFIGURAR DNS NO CLOUDFLARE
========================================

ğŸ”§ INFORMAÃ‡Ã•ES DO SEU TÃšNEL:
   Tunnel ID: c4ff0fa1-6de9-4b4d-a6ee-67805224336c
   Status: âœ… RUNNING (serviÃ§o Windows ativo)

ğŸ“‹ O QUE ESTÃ CONFIGURADO:
   âœ… prevencaonoradar.com.br      â†’ Frontend (porta 3004)
   âœ… www.prevencaonoradar.com.br  â†’ Frontend (porta 3004)
   âš ï¸ api.prevencaonoradar.com.br  â†’ Backend (porta 3001) - FALTA DNS!

========================================
  PASSO A PASSO - CONFIGURAR DNS
========================================

1ï¸âƒ£ ACESSAR PAINEL DO CLOUDFLARE:
   ğŸŒ Acesse: https://dash.cloudflare.com
   ğŸ” FaÃ§a login com sua conta
   ğŸ“ Clique no domÃ­nio: prevencaonoradar.com.br

2ï¸âƒ£ IR PARA CONFIGURAÃ‡Ã•ES DE DNS:
   ğŸ“ No menu lateral esquerdo, clique em: DNS
   ğŸ“ VocÃª verÃ¡ uma lista de registros DNS

3ï¸âƒ£ VERIFICAR REGISTROS EXISTENTES:
   
   Verifique se jÃ¡ existem estes registros:
   
   âœ… prevencaonoradar.com.br
      Tipo: CNAME
      Target: c4ff0fa1-6de9-4b4d-a6ee-67805224336c.cfargotunnel.com
      Proxy: â˜ï¸ Proxied (nuvem laranja)
   
   âœ… www.prevencaonoradar.com.br
      Tipo: CNAME
      Target: c4ff0fa1-6de9-4b4d-a6ee-67805224336c.cfargotunnel.com
      Proxy: â˜ï¸ Proxied (nuvem laranja)

4ï¸âƒ£ ADICIONAR REGISTRO DNS PARA API:
   
   Se NÃƒO existir "api.prevencaonoradar.com.br":
   
   ğŸ“ Clique no botÃ£o: "Add record" (Adicionar registro)
   
   ğŸ“ Preencha:
      Type:         CNAME
      Name:         api
      Target:       c4ff0fa1-6de9-4b4d-a6ee-67805224336c.cfargotunnel.com
      Proxy status: â˜ï¸ Proxied (deixe a nuvem laranja ATIVA)
      TTL:          Auto
   
   ğŸ’¾ Clique em: Save

5ï¸âƒ£ AGUARDAR PROPAGAÃ‡ÃƒO:
   â±ï¸ Aguarde 2-5 minutos para o DNS propagar
   ğŸ”„ A propagaÃ§Ã£o pode levar atÃ© 10 minutos

========================================
  TESTAR SE FUNCIONOU
========================================

ApÃ³s configurar, teste:

1. Abra o navegador em modo anÃ´nimo
2. Acesse: https://prevencaonoradar.com.br
   âœ… Deve mostrar o sistema (frontend)

3. Acesse: https://api.prevencaonoradar.com.br/api/health
   âœ… Deve retornar JSON: {"status":"ok",...}

========================================
  VERIFICAR DNS (Windows)
========================================

No prompt de comando (CMD):

   nslookup prevencaonoradar.com.br
   nslookup api.prevencaonoradar.com.br

âœ… Deve retornar IPs do Cloudflare (104.x.x.x ou 172.x.x.x)
âŒ Se retornar "Non-existent domain" = DNS ainda nÃ£o configurado

========================================
  PROBLEMAS COMUNS
========================================

âŒ Erro 522 (Connection timed out):
   â†’ Backend nÃ£o estÃ¡ rodando na porta 3001
   â†’ Execute: INICIAR-TUDO.bat
   â†’ Verifique: netstat -ano | findstr :3001

âŒ Erro 525 (SSL handshake failed):
   â†’ Proxy status deve estar: â˜ï¸ Proxied (laranja)
   â†’ VÃ¡ em SSL/TLS â†’ Escolha: Full ou Full (strict)

âŒ PÃ¡gina em branco ou 404:
   â†’ TÃºnel nÃ£o estÃ¡ rodando
   â†’ Execute: sc query Cloudflared
   â†’ Se parado: net start Cloudflared

âŒ DNS nÃ£o resolve:
   â†’ Limpe cache DNS: ipconfig /flushdns
   â†’ Aguarde mais tempo (atÃ© 10 minutos)
   â†’ Use DNS do Google: 8.8.8.8

========================================
  COMANDOS ÃšTEIS
========================================

# Ver status do tÃºnel
sc query Cloudflared

# Reiniciar tÃºnel
net stop Cloudflared
net start Cloudflared

# Limpar cache DNS local
ipconfig /flushdns

# Testar API local
curl http://localhost:3001/api/health

# Testar API via Cloudflare (apÃ³s configurar)
curl https://api.prevencaonoradar.com.br/api/health

========================================
  RESUMO
========================================

O Cloudflare Tunnel JÃ ESTÃ CONFIGURADO no seu servidor!

VocÃª sÃ³ precisa:
1. Adicionar o registro DNS "api" no painel Cloudflare
2. Aguardar 2-5 minutos
3. Testar o acesso

Depois disso, o domÃ­nio prevencaonoradar.com.br vai funcionar
perfeitamente, sem depender do Ngrok! ğŸš€

Data: 10/12/2025
